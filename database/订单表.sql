-- 订单表 Order
CREATE TABLE [Order] (
    OrderID CHAR(15) PRIMARY KEY,               -- 订单编号 (15位)
    StudentID CHAR(12) NOT NULL,                -- 学生编号
    MerchantID CHAR(5) NOT NULL,                -- 档口编号
    OrderTime DATETIME NOT NULL,                -- 下单时间
    TotalAmount DECIMAL(10, 2) NOT NULL,        -- 总金额
    Status VARCHAR(10) CHECK (Status IN ('待支付', '已完成')) NOT NULL, -- 订单状态（保持 VARCHAR，不改类型）
    FOREIGN KEY (StudentID) REFERENCES Student(StudentID),
    FOREIGN KEY (MerchantID) REFERENCES Merchant(MerchantID)
);

INSERT INTO [Order] (OrderID, StudentID, MerchantID, OrderTime, TotalAmount, Status) VALUES  
('011012511030019', '202411040504', '01101', '2025-11-03 18:45:00', 18.00, '已完成'),
('011022511030002', '202411040102', '01102', '2025-11-03 12:10:00', 11.00, N'已完成'), 
('012012511030003', '202411040103', '01201', '2025-11-03 12:15:00', 7.00, N'已完成'), 
('021012511030004', '202411040104', '02101', '2025-11-03 12:20:00', 11.00, N'待支付'), 
('021022511030005', '202411040105', '02102', '2025-11-03 12:25:00', 12.00, N'已完成'), 
('022012511030006', '202411040501', '02201', '2025-11-03 12:30:00', 18.00, N'已完成'), 
('022022511030007', '202411040502', '02202', '2025-11-03 12:35:00', 9.00, N'已完成'),  
('031012511030008', '202411040503', '03101', '2025-11-03 12:40:00', 12.00, N'待支付'), 
('031022511030009', '202411040504', '03102', '2025-11-03 12:45:00', 17.00, N'已完成'), 
('032012511030010', '202411040301', '03201', '2025-11-03 18:00:00', 20.00, N'已完成'), 
('011012511030011', '202411040302', '01101', '2025-11-03 18:05:00', 12.00, N'已完成'), 
('011022511030012', '202411040303', '01102', '2025-11-03 18:10:00', 22.00, N'已完成'), 
('012012511030013', '202411040304', '01201', '2025-11-03 18:15:00', 16.00, N'已完成'), 
('021012511030014', '202411040305', '02101', '2025-11-03 18:20:00', 12.00, N'待支付'), 
('021022511030015', '202411040306', '02102', '2025-11-03 18:25:00', 7.00, N'已完成'),  
('022022511030016', '202411040101', '02202', '2025-11-03 18:30:00', 7.00, N'已完成'),  
('031012511030017', '202411040102', '03101', '2025-11-03 18:35:00', 23.00, N'待支付'), 
('032012511030018', '202411040103', '03201', '2025-11-03 18:40:00', 22.00, N'已完成'), 
('012012511030020', '202411040304', '01201', '2025-11-03 19:00:00', 16.00, N'已完成');

-- 追加缺失的订单，供 payment.sql 外键关联
INSERT INTO [Order] (OrderID, StudentID, MerchantID, OrderTime, TotalAmount, Status)
VALUES ('011012511030001', '202411040101', '01101', '2025-11-03 12:05:00', 18.00, N'已完成');